import{a as pe}from"/build/_shared/chunk-KYBFV6QH.js";import{c as ne}from"/build/_shared/chunk-BQZB7SZU.js";import{a as fe}from"/build/_shared/chunk-A62XF3CA.js";import{a as le}from"/build/_shared/chunk-J4UCJ3T4.js";import{a as ue}from"/build/_shared/chunk-YQX6ADP4.js";import{a as me,b as re,c as b,d as u,f as te}from"/build/_shared/chunk-P5YPHNIW.js";import{a as de}from"/build/_shared/chunk-PGOH7JLP.js";import{a as J,b as Z,c as ee,d as oe,e as ae}from"/build/_shared/chunk-BU5VY3X4.js";import{D as c,G as w,H as j,J as Y,N as $,Q as S,p as W,y as g}from"/build/_shared/chunk-Z6MCQOJL.js";import{a as G,c as Q,l as y,m as _,q as K}from"/build/_shared/chunk-6KANJRLS.js";import{c as n}from"/build/_shared/chunk-Q3IECNXJ.js";var d=n(G(),1);function ie({title:o,titleId:f,...s},t){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":f},s),o?d.createElement("title",{id:f},o):null,d.createElement("path",{d:"M5.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75V12zM6 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H6zM7.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H8a.75.75 0 01-.75-.75V12zM8 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H8zM9.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V10zM10 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H10zM9.25 14a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H10a.75.75 0 01-.75-.75V14zM12 9.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V10a.75.75 0 00-.75-.75H12zM11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H12a.75.75 0 01-.75-.75V12zM12 13.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V14a.75.75 0 00-.75-.75H12zM13.25 10a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H14a.75.75 0 01-.75-.75V10zM14 11.25a.75.75 0 00-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 00.75-.75V12a.75.75 0 00-.75-.75H14z"}),d.createElement("path",{fillRule:"evenodd",d:"M5.75 2a.75.75 0 01.75.75V4h7V2.75a.75.75 0 011.5 0V4h.25A2.75 2.75 0 0118 6.75v8.5A2.75 2.75 0 0115.25 18H4.75A2.75 2.75 0 012 15.25v-8.5A2.75 2.75 0 014.75 4H5V2.75A.75.75 0 015.75 2zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75z",clipRule:"evenodd"}))}var xe=d.forwardRef(ie),A=xe;var Ie=n(de());var r=n(G());var he=n(ue());var k=n(me()),C=n(pe());var e=n(K());function se(){let{upcomingFixtures:o}=y();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"flex max-w-screen-xl flex-col gap-12 p-10",children:(0,e.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,e.jsx)(le,{title:"Overview"}),o.length>0?(0,e.jsx)("div",{className:"grid grid-cols-3 gap-8",children:o.map(f=>(0,e.jsx)(ge,{fixture:f},f.id))}):(0,e.jsx)(fe,{label:"No upcoming matches, check back later",icon:(0,e.jsx)(oe,{size:70,className:"text-gray-600"})})]})})})}function ge({fixture:o}){var R,P,M,T,N,L,O;let f=Q(),{upcomingFixtures:s}=y(),t=_(),l=r.useId(),[m,x]=r.useState(o.id),[p,v]=r.useState(),[I,B]=r.useState(1),[ce,h]=W(!1,{onClose:()=>{x(null),B(1)}}),i=t.state!=="idle",D=r.useMemo(()=>!p||!I?0:p.pricePerSeat*I,[p,I]);return r.useEffect(()=>{m&&v(s.find(a=>a.id===m))},[m,s]),r.useEffect(()=>{i||t.data&&(console.log(t.data),t.data.success&&(h.close(),f("/tickets")))},[t.data,i]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"rounded-lg bg-white shadow-sm ring-1 ring-gray-900/5",children:[(0,e.jsxs)("dl",{className:"flex flex-wrap",children:[(0,e.jsx)("div",{className:"flex-auto pl-6 pt-6",children:(0,e.jsxs)("dt",{className:"text-base font-semibold leading-6 text-gray-900",children:[o.teamOne.abbr.toUpperCase()," vs"," ",o.teamTwo.abbr.toUpperCase()]})}),(0,e.jsxs)("div",{className:"mt-8 flex w-full flex-none gap-x-4 px-6",children:[(0,e.jsxs)("dt",{className:"flex-none",children:[(0,e.jsx)("span",{className:"sr-only",children:"Due date"}),(0,e.jsx)(A,{className:"h-6 w-5 text-gray-400","aria-hidden":"true"})]}),(0,e.jsx)("dd",{className:"flex items-center gap-4 text-sm leading-6 text-gray-500",children:(0,e.jsx)("span",{children:b((R=o.timeSlot)==null?void 0:R.date)})})]}),(0,e.jsxs)("div",{className:"mt-4 flex w-full flex-none gap-x-4 px-6",children:[(0,e.jsxs)("dt",{className:"flex-none",children:[(0,e.jsx)("span",{className:"sr-only",children:"Time"}),(0,e.jsx)(ae,{className:"h-6 w-5 text-gray-400","aria-hidden":"true"})]}),(0,e.jsx)("dd",{className:"text-sm leading-6 text-gray-500",children:(0,e.jsxs)("span",{children:[u((P=o.timeSlot)==null?void 0:P.start)," -"," ",u((M=o.timeSlot)==null?void 0:M.end)]})})]}),(0,e.jsxs)("div",{className:"mt-4 flex w-full flex-none gap-x-4 px-6",children:[(0,e.jsxs)("dt",{className:"flex-none",children:[(0,e.jsx)("span",{className:"sr-only",children:"Status"}),(0,e.jsx)(ee,{className:"h-6 w-5 text-gray-400","aria-hidden":"true"})]}),(0,e.jsx)("dd",{className:"text-sm leading-6 text-gray-500",children:o.stadium.name})]}),(0,e.jsxs)("div",{className:"mt-4 flex w-full flex-none gap-x-4 px-6",children:[(0,e.jsxs)("dt",{className:"flex-none",children:[(0,e.jsx)("span",{className:"sr-only",children:"Available Tickets"}),(0,e.jsx)(ne,{className:"h-6 w-5 text-gray-400","aria-hidden":"true"})]}),(0,e.jsx)("dd",{className:"text-sm leading-6 text-gray-500",children:o.availableSeats>0?`${o.availableSeats} seats available`:"Sold out"})]}),(0,e.jsxs)("div",{className:"mt-4 flex w-full flex-none gap-x-4 px-6",children:[(0,e.jsxs)("dt",{className:"flex-none",children:[(0,e.jsx)("span",{className:"sr-only",children:"Stadium Opens At"}),(0,e.jsx)(J,{className:"h-6 w-5 text-gray-400","aria-hidden":"true"})]}),(0,e.jsxs)("dd",{className:"text-sm leading-6 text-gray-500",children:["Stadium opens at ",u(o.stadiumOpenTime)]})]})]}),(0,e.jsx)("div",{className:"mt-6 border-t border-gray-900/5 px-6 py-6",children:(0,e.jsx)(w,{variant:"white",disabled:o.availableSeats===0,compact:!0,onClick:()=>h.open(),rightIcon:(0,e.jsx)(Z,{size:16}),children:o.availableSeats>0?"Buy tickets":"Sold out"})})]}),(0,e.jsx)(Y,{opened:ce,onClose:()=>h.close(),title:"Buy tickets",centered:!0,overlayBlur:1.2,overlayOpacity:.6,children:(0,e.jsx)(t.Form,{method:"post",replace:!0,action:"/tickets",children:(0,e.jsxs)("fieldset",{disabled:i,className:"flex flex-col gap-4",children:[(0,e.jsx)(S,{name:"fixtureId",label:"Fixture",itemComponent:we,value:m,onChange:a=>x(a),data:s.map(a=>{var U,F,E,V,H,z,X,q;return{fixtureDate:(U=a.timeSlot)==null?void 0:U.date,fixtureStartTime:(F=a.timeSlot)==null?void 0:F.start,fixtureEndTime:(E=a.timeSlot)==null?void 0:E.end,stadium:(V=a.stadium)==null?void 0:V.name,teamOne:(H=a.teamOne)==null?void 0:H.name,teamTwo:(z=a.teamTwo)==null?void 0:z.name,label:`${(X=a.teamOne)==null?void 0:X.name} vs ${(q=a.teamTwo)==null?void 0:q.name}`,value:a.id}}),error:(N=(T=t.data)==null?void 0:T.fieldErrors)==null?void 0:N.fixtureId,readOnly:!0,required:!0}),(0,e.jsx)($,{name:"noOfTickets",label:"No of tickets",value:I,max:o.availableSeats,onChange:a=>B(a),error:(O=(L=t.data)==null?void 0:L.fieldErrors)==null?void 0:O.noOfTickets,min:1,required:!0}),(0,e.jsxs)("p",{className:"text-sm",children:["Available Seats: ",o.availableSeats]}),(0,e.jsx)("p",{className:"text-sm",children:D?`Total price: ${te(D)}`:null}),(0,e.jsx)(S,{label:"Payment method",clearable:!1,required:!0,defaultValue:k.PaymentMethod.CREDIT_CARD,data:Object.values(k.PaymentMethod).map(a=>({label:re(a.replace(/_/g," ")),value:a}))}),(0,e.jsx)(c.Wrapper,{id:l,label:"Credit card number",required:!0,children:(0,e.jsx)(c,{id:l,component:C.default,mask:"9999 9999 9999 9999",placeholder:"XXXX XXXX XXXX XXXX",alwaysShowMask:!1,defaultValue:"4242 4242 4242 4242"})}),(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)(c.Wrapper,{id:l+"cvv",label:"CVV",required:!0,children:(0,e.jsx)(c,{id:l+"cvv",name:"cvv",component:C.default,mask:"999",placeholder:"XXX",defaultValue:"123",alwaysShowMask:!1})}),(0,e.jsx)(c.Wrapper,{id:l+"cvv",label:"Expiry",required:!0,children:(0,e.jsx)(c,{id:l+"expiryDate",name:"expiryDate",component:C.default,mask:"99/9999",placeholder:"MM/YYYY",alwaysShowMask:!1,defaultValue:"12/2029"})})]}),(0,e.jsxs)("div",{className:"mt-1 flex items-center justify-end gap-4",children:[(0,e.jsx)(w,{variant:"subtle",disabled:i,onClick:()=>h.close(),color:"red",children:"Cancel"}),(0,e.jsx)(w,{type:"submit",loading:i,loaderPosition:"right",children:"Buy tickets"})]})]})})})]})}var we=r.forwardRef((o,f)=>{let{teamOne:s,teamTwo:t,fixtureDate:l,fixtureStartTime:m,fixtureEndTime:x,stadium:p,...v}=o;return(0,e.jsx)("div",{ref:f,...v,children:(0,e.jsx)(j,{noWrap:!0,children:(0,e.jsxs)("div",{children:[(0,e.jsxs)(g,{size:"sm",children:[s," vs ",t]}),(0,e.jsx)(g,{size:"xs",opacity:.65,children:p}),(0,e.jsxs)(g,{size:"xs",opacity:.65,children:[b(l)," (",u(m)," -"," ",u(x),")"]})]})})})});export{se as default};
