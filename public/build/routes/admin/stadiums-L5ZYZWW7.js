import{a as K}from"/build/_shared/chunk-HJLIZX7G.js";import{a as P,b as v,c as V,d as j,e as d,f as m}from"/build/_shared/chunk-4XRWHIFM.js";import{a as F}from"/build/_shared/chunk-A62XF3CA.js";import{a as q}from"/build/_shared/chunk-J4UCJ3T4.js";import{c as w}from"/build/_shared/chunk-XX5622KO.js";import"/build/_shared/chunk-P5YPHNIW.js";import{a as G}from"/build/_shared/chunk-PGOH7JLP.js";import{g as O,k}from"/build/_shared/chunk-BU5VY3X4.js";import{a as J}from"/build/_shared/chunk-JA4FJ5TH.js";import{G as n,J as D,M as h,N as I,c as B,p as C}from"/build/_shared/chunk-Z6MCQOJL.js";import{a as X,m as R,q as z}from"/build/_shared/chunk-6KANJRLS.js";import{c as r}from"/build/_shared/chunk-Q3IECNXJ.js";var Q=r(G());var o=r(X());var W=r(K());var Y=r(J());var e=r(z());function L(){var y,x,S,E,N,A,M;let t=R(),{stadiums:l}=w(),[u,f]=o.useState(null),[a,p]=o.useState(null),[b,g]=o.useState(0),[U,s]=C(!1),c=t.state!=="idle";return o.useEffect(()=>{var i;t.state!=="idle"&&t.submission===void 0||(i=t.data)!=null&&i.success&&(f(null),s.close())},[(y=t.data)==null?void 0:y.success,t.state,t.submission]),o.useEffect(()=>{if(!u){p(null);return}let i=l.find(T=>T.id===u);i&&(p(i),s.open())},[l,u]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"flex max-w-screen-xl flex-col gap-12 p-10",children:(0,e.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,e.jsx)(q,{title:"Stadiums",rightSection:(0,e.jsx)(n,{color:"dark",radius:"md",onClick:()=>{g(1),s.open()},leftIcon:(0,e.jsx)(k,{size:18}),children:"Create"})}),l.length>0?(0,e.jsx)("div",{className:"flow-root",children:(0,e.jsx)("div",{className:"inline-block min-w-full py-2 align-middle",children:(0,e.jsxs)(P,{children:[(0,e.jsx)(j,{children:(0,e.jsxs)(v,{children:[(0,e.jsx)(d,{pos:"first",children:"Name"}),(0,e.jsx)(d,{children:"Abbreviation"}),(0,e.jsx)(d,{children:"No of Seats"}),(0,e.jsx)(d,{pos:"last",children:(0,e.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,e.jsx)(V,{children:l.map((i,T)=>{let H=T===l.length-1;return(0,e.jsxs)(v,{hasBorder:!H,children:[(0,e.jsx)(m,{pos:"first",children:i.name}),(0,e.jsx)(m,{children:i.abbr.toUpperCase()}),(0,e.jsx)(m,{children:i.size}),(0,e.jsx)(m,{children:(0,e.jsx)("div",{className:"flex items-center justify-end gap-4",children:(0,e.jsx)(n,{loading:c,variant:"subtle",color:"gray",compact:!0,loaderPosition:"right",onClick:()=>{f(i.id),g(0)},children:"Edit"})})})]})})})]})})}):(0,e.jsx)(F,{label:"No stadiums have been added yet",icon:(0,e.jsx)(O,{size:70,className:"text-gray-600"})})]})}),(0,e.jsx)(D,{opened:U,onClose:()=>{f(null),s.close()},title:B({"Edit stadium":b===0,"Add stadium":b===1}),centered:!0,overlayBlur:1.2,overlayOpacity:.6,children:(0,e.jsx)(t.Form,{method:"post",replace:!0,children:(0,e.jsxs)("fieldset",{disabled:c,className:"flex flex-col gap-4",children:[(0,e.jsx)("input",{type:"hidden",name:"stadiumId",value:a==null?void 0:a.id}),(0,e.jsx)(h,{name:"name",label:"Name",defaultValue:a==null?void 0:a.name,error:(S=(x=t.data)==null?void 0:x.fieldErrors)==null?void 0:S.name,required:!0}),(0,e.jsx)(h,{name:"abbr",label:"Abbreviation",defaultValue:a==null?void 0:a.abbr,error:(N=(E=t.data)==null?void 0:E.fieldErrors)==null?void 0:N.abbr,required:!0}),(0,e.jsx)(I,{name:"size",label:"No of Seats",defaultValue:a==null?void 0:a.size,min:1,error:(M=(A=t.data)==null?void 0:A.fieldErrors)==null?void 0:M.size,required:!0}),(0,e.jsxs)("div",{className:"mt-1 flex items-center justify-end gap-4",children:[(0,e.jsx)(n,{variant:"subtle",disabled:c,onClick:()=>{p(null),s.close()},color:"red",children:"Cancel"}),(0,e.jsx)(n,{type:"submit",loading:c,loaderPosition:"right",children:b===0?"Save changes":"Add stadium"})]})]})})})]})}export{L as default};
