import{a as O,b as A}from"/build/_shared/chunk-BQZB7SZU.js";import{a as V}from"/build/_shared/chunk-6HJM7BVW.js";import{c as k}from"/build/_shared/chunk-XX5622KO.js";import{a as U,b as D,d,e as C,g as I}from"/build/_shared/chunk-P5YPHNIW.js";import{a as M}from"/build/_shared/chunk-PGOH7JLP.js";import{B as r,F as l,G as i,c as w,p as N}from"/build/_shared/chunk-Z6MCQOJL.js";import{g as b,m as S,q as n}from"/build/_shared/chunk-6KANJRLS.js";import{c as s}from"/build/_shared/chunk-Q3IECNXJ.js";var o=s(U()),W=s(M());var B=s(n());function E({children:e,className:a}){return(0,B.jsx)("div",{className:w("mx-auto max-w-2xl lg:max-w-7xl",a),children:e})}var z=s(V());var t=s(n());function P(){let{orders:e}=k();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(E,{className:"mt-16",children:(0,t.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"sm:flex sm:items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(i,{leftIcon:(0,t.jsx)(O,{className:"h-4 w-4"}),variant:"subtle",size:"md",component:b,to:"..",pl:0,mb:20,color:"gray",children:"Back"}),(0,t.jsx)("h1",{className:"text-3xl font-semibold text-gray-900",children:"Orders"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:"View and manage all the orders placed"})]})}),(0,t.jsx)("div",{className:"mt-8 flex flex-col",children:(0,t.jsx)("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,t.jsx)("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:e.length>0?(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Name"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Fixture"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"No of tickets"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Amount"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Payment Status"}),(0,t.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Order Status"}),(0,t.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.map(a=>(0,t.jsx)(_,{order:a},a.id))})]}):(0,t.jsxs)("div",{className:"relative block w-full rounded-lg border-2 border-dashed border-gray-300 bg-white p-12 text-center",children:[(0,t.jsx)(A,{className:"mx-auto h-9 w-9 text-gray-500"}),(0,t.jsxs)("span",{className:"mt-4 block text-sm font-medium text-gray-500",children:["No order found. ",(0,t.jsx)("br",{}),"Come back later."]})]})})})})})]})})})}function _({order:e}){var p,x,u,f,v,g,h,y;let a=S(),[T,c]=N(!1),L=e.tickets.map(F=>F.seatNo),R=a.state!=="idle",m=e.status===o.OrderStatus.SUCCESS;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.audience.firstName," ",e.audience.lastName]}),(0,t.jsx)("div",{className:"text-gray-500",children:e.audience.email})]})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[e.schedule.teamOne.name," vs ",e.schedule.teamTwo.name]}),(0,t.jsx)("div",{className:"font-medium text-gray-500",children:e.schedule.stadium.name}),(0,t.jsxs)("div",{className:"text-gray-500",children:[d((x=(p=e.schedule.timeSlot)==null?void 0:p.start)!=null?x:new Date)," -"," ",d((f=(u=e.schedule.timeSlot)==null?void 0:u.end)!=null?f:new Date)]})]})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.noOfTickets.toString().padStart(2,"0")}),(0,t.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:["$",(v=e.payment)==null?void 0:v.amount.toFixed(2)]}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,t.jsx)(l,{className:"max-w-min",variant:"outline",fullWidth:!1,color:((g=e.payment)==null?void 0:g.status)===o.PaymentStatus.PAID?"green":o.PaymentStatus.REFUNDED?"red":"blue",children:D((y=(h=e.payment)==null?void 0:h.status)!=null?y:"")})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,t.jsx)(l,{className:"max-w-min",variant:"dot",fullWidth:!1,color:e.status===o.OrderStatus.SUCCESS?"green":"red",children:I(e.status)})}),(0,t.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-6 text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsxs)(r,{width:200,position:"bottom-start",withArrow:!0,shadow:"md",opened:T,disabled:!m,children:[(0,t.jsx)(r.Target,{children:(0,t.jsx)(i,{onMouseEnter:()=>c.open(),onMouseLeave:()=>c.close(),variant:"white",compact:!0,disabled:!m,children:"View Seats"})}),(0,t.jsx)(r.Dropdown,{sx:{pointerEvents:"none"},className:"whitespace-normal break-words",children:C(L)})]}),(0,t.jsx)(i,{variant:"white",compact:!0,color:"red",loaderPosition:"right",loading:R,disabled:!m,onClick:()=>a.submit({orderId:e.id,intent:"cancel-order"},{method:"post",replace:!0}),children:"Cancel Order"})]})})]},e.id)}export{P as default};
